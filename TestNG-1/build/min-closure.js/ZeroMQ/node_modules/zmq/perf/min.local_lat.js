'use strict';var zmq=require("../"),assert=require("assert");5!=process.argv.length&&(console.log("usage: local_lat \x3cbind-to\x3e \x3cmessage-size\x3e \x3croundtrip-count\x3e"),process.exit(1));var bind_to=process.argv[2],message_size=Number(process.argv[3]),roundtrip_count=Number(process.argv[4]),counter=0,rep=zmq.socket("rep");rep.bindSync(bind_to);
rep.on("message",function(a){assert.equal(a.length,message_size,"message-size did not match");rep.send(a);++counter===roundtrip_count&&setTimeout(function(){rep.close()},1E3)});