'use strict';var zmq=require("../"),assert=require("assert");5!=process.argv.length&&(console.log("usage: remote_thr \x3cbind-to\x3e \x3cmessage-size\x3e \x3cmessage-count\x3e"),process.exit(1));var connect_to=process.argv[2],message_size=Number(process.argv[3]),message_count=Number(process.argv[4]),message=new Buffer(message_size);message.fill("h");var counter=0,sock=zmq.socket("push");sock.connect(connect_to);
function send(){for(var a=0;a<message_count;a++)sock.send(message);setTimeout(function(){sock.close()},1E3)}setTimeout(send,1E3);