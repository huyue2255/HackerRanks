'use strict';var zmq=require(".."),should=require("should"),semver=require("semver");
describe("socket",function(){var a;it("should alias socket",function(){zmq.createSocket.should.equal(zmq.socket)});it("should include type and close",function(){a=zmq.socket("req");a.type.should.equal("req");a.close.should.be.a.Function});it("should use socketopt",function(){a.getsockopt(zmq.ZMQ_BACKLOG).should.not.equal(75);a.setsockopt(zmq.ZMQ_BACKLOG,75).should.equal(a);a.getsockopt(zmq.ZMQ_BACKLOG).should.equal(75);a.setsockopt(zmq.ZMQ_BACKLOG,100)});it("should use socketopt with sugar",function(){a.getsockopt("backlog").should.not.equal(75);
a.setsockopt("backlog",75).should.equal(a);a.getsockopt("backlog").should.equal(75);a.backlog.should.be.a.Number;a.backlog.should.not.equal(50);a.backlog=50;a.backlog.should.equal(50)});it("should close",function(){a.close()});it("should support options",function(){a=zmq.socket("req",{backlog:30});a.backlog.should.equal(30);a.close()});it("should throw a javascript error if it hits the system file descriptor limit",function(){var a,b=[];(function(){for(a=0;1E4>a;a++)b.push(zmq.socket("router"))}).should["throw"];
for(a=0;a<b.length;a++)b[a].close()})});