'use strict';var zmq=require(".."),should=require("should");
describe("socket.pair",function(){it("should support pair-pair",function(d){var c=zmq.socket("pair"),b=zmq.socket("pair"),e=0;c.on("message",function(a){a.should.be.an.instanceof(Buffer);switch(e++){case 0:a.toString().should.equal("foo");break;case 1:a.toString().should.equal("bar");break;case 2:a.toString().should.equal("baz"),c.close(),b.close(),d()}});b.on("message",function(a){a.should.be.an.instanceof(Buffer);a.toString().should.equal("barnacle")});c.bind("inproc://stuffpair",function(a){if(a)throw a;
b.connect("inproc://stuffpair");c.send("barnacle");b.send("foo");b.send("bar");b.send("baz")})})});